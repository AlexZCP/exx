import{j as K,r as v,bk as $,d as y,w as L,k as c,l as C,D as q,t as e,u as n,x as u,e as t,q as _,v as f,bp as G,P as V}from"./naive-ui.26efb6a0.js";import{_ as z,u as Z,a as O,b as P,g as T}from"./index.eeb0ed8e.js";var H="/account/img/login_people.svg";const J={class:"GeneralLoginForm"},Q={class:"cols"},W={class:"column col-12 col-sm-6"},X={class:"login__image"},Y=["alt"],ee={class:"column col-12 col-sm-6"},se={class:"login__form"},oe={class:"cols"},te={class:"column col-6 login__form__header"},ae={class:"column col-6 create_account"},ne={class:"column col-12"},ce={class:"cols"},le={class:"column col-12"},re={class:"cols"},_e={class:"column col-6"},ie={class:"column col-6 create_account"},ue={href:"#",class:"create_account__link"},de=K({props:{msg:String},setup(D){const{defaultUrlAfterLogin:g}=T,i="auth",h=v(null),p=v(!1),M=$(),m=Z(),b=O(),{t:o}=P(),N=y(()=>m.state[i].user),S=y(()=>m.state[i].msg_id),U={username:{required:!0,validator:(a,s)=>/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s),message:o("text.please_input_email"),trigger:"blur"},password:{required:!0,message:o("text.please_input_password"),trigger:["input","blur"]}},l=v({username:"",password:""}),w=()=>{var a;(a=h.value)==null||a.validate(s=>{s||(p.value=!0,m.dispatch(i+"/login",l.value))})};return L(N,a=>{var s;if(p.value=!1,a.name&&a.id){const d=b.currentRoute.value;((s=d.query)==null?void 0:s.route_back)&&window?window.location.href=d.query.route_back:b.push(g)}}),L(S,a=>{const s=a.split("auth.error.");s.length>1&&M.error(o("message."+s[1]))}),(a,s)=>{const d=c("router-link"),x=c("cp-input"),k=c("cp-form-item"),j=c("cp-form"),B=c("cp-spin"),E=c("cp-checkbox"),F=c("cp-button");return C(),q("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("img",{src:H,alt:n(o)("message.wellcome")},null,8,Y)])]),e("div",ee,[e("div",se,[e("div",oe,[e("div",te,[e("h3",null,u(n(o)("text.login_to_cp")),1)]),e("div",ae,[t(d,{to:"/registration",class:"create_account__link"},{default:_(()=>[f(u(n(o)("message.create_acccount")),1)]),_:1})]),e("div",ne,[t(B,{show:p.value,size:100,"stroke-width":5},{default:_(()=>[t(j,{ref:(r,I)=>{I.formRef=r,h.value=r},model:l.value,rules:U,onKeyup:G(w,["enter"])},{default:_(()=>[e("div",ce,[e("div",le,[t(k,{label:n(o)("label.email"),path:"username"},{default:_(()=>[t(x,{value:l.value.username,"onUpdate:value":s[0]||(s[0]=r=>l.value.username=r),class:"input--blue-override"},null,8,["value"])]),_:1},8,["label"]),t(k,{label:n(o)("label.password"),path:"password"},{default:_(()=>[t(x,{value:l.value.password,"onUpdate:value":s[1]||(s[1]=r=>l.value.password=r),type:"password","show-password-on":"mousedown",class:"input--blue-override","input-props":{autoComplete:"off"}},null,8,["value"])]),_:1},8,["label"])])])]),_:1},8,["model","onKeyup"])]),_:1},8,["show"]),e("div",re,[e("div",_e,[t(E,{size:"large",type:"checkbox"}),f(" "+u(n(o)("text.remember_me")),1)]),e("div",ie,[e("a",ue,u(n(o)("text.forgot_password")),1)])]),t(F,{onClick:V(w,["prevent"]),type:"info",class:"cp-button",size:"huge"},{default:_(()=>[f(u(n(o)("label.login")),1)]),_:1},8,["onClick"])])])])])])])}}});var pe=z(de,[["__scopeId","data-v-7dd43575"]]),R={};const A={},me={class:"home"};function ve(D,g){const i=pe;return C(),q("div",me,[t(i)])}typeof R=="function"&&R(A);var he=z(A,[["render",ve]]);export{he as default};
